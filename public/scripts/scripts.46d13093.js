"use strict";angular.module("f12016App",["config","ngMaterial","ngMdIcons","ngAnimate","ngCookies","ngResource","ngSanitize","ui.router","md.data.table"]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("blue")}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){a.state("standing",{views:{header:{templateUrl:"views/header.html"},footer:{templateUrl:"views/footer.html"}}}).state("standing.list",{url:"/",views:{"container@":{templateUrl:"views/standing/standing.list.html",controller:"StandingListCtrl"}}}).state("standing.detail",{url:"/:driverId",views:{"container@":{templateUrl:"views/standing/standing.detail.html",controller:"StandingDetailCtrl"}}}),c.html5Mode(!0).hashPrefix("!")}]),angular.module("config",[]).constant("ENV",{name:"development",apiEndpoint:"http://ergast.com/api/f1/2016"}),angular.module("f12016App").controller("StandingListCtrl",["$scope","$q","DriverService",function(a,b,c){var d=b.defer();a.loadingStanding=d.promise,c.find().then(function(b){var c=b.MRData.StandingsTable.StandingsLists;c.length>0&&(a.standings=c[0]),d.resolve()},function(a){console.log(a)}),a.query={order:"position | num"}}]).controller("StandingDetailCtrl",["$scope","$stateParams","$q","DriverService",function(a,b,c,d){var e=c.defer(),f=b.driverId;a.loadingDriver=!0,d.get(f).then(function(b){var c=b.MRData.StandingsTable.StandingsLists;c.length>0&&(a.driver=c[0].DriverStandings[0].Driver,a.constructors=c[0].DriverStandings[0].Constructors),a.loadingDriver=!1},function(a){console.log(a)}),a.promise=e.promise,d.races(f).then(function(b){b.MRData.RaceTable.Races.length>0&&(a.races=b.MRData.RaceTable.Races),e.resolve()},function(a){console.log(a)}),a.query={order:"round | num"}}]),angular.module("f12016App").service("DriverService",["$http","$q","ENV",function(a,b,c){return{find:function(){return a.get(c.apiEndpoint+"/driverStandings.json").then(function(a){return"object"==typeof a.data?a.data:b.reject(a.data)},function(a){return b.reject(a.data)})},get:function(d){return a.get(c.apiEndpoint+"/drivers/"+d+"/driverStandings.json").then(function(a){return"object"==typeof a.data?a.data:b.reject(a.data)},function(a){return b.reject(a.data)})},races:function(d){return a.get(c.apiEndpoint+"/drivers/"+d+"/results.json").then(function(a){return"object"==typeof a.data?a.data:b.reject(a.data)},function(a){return b.reject(a.data)})}}}]),angular.module("f12016App").filter("num",function(){return function(a){return parseInt(a,10)}}),angular.module("f12016App").directive("flag",function(){return{restrict:"E",replace:!0,template:'<span class="flag {{ country }}"></span>',scope:{country:"@"},link:function(a){a.$watch("country",function(b){a.country=angular.lowercase(b)})}}}),angular.module("f12016App").run(["$templateCache",function(a){a.put("views/footer.html",'<md-toolbar class="md-toolbar"> <div class="md-toolbar-tools"> <h2 flex md-truncate><a ui-sref="standing.list">Formula 1 Championship 2016</a></h2> </div> </md-toolbar>'),a.put("views/header.html",'<md-toolbar class="md-toolbar"> <div class="md-toolbar-tools"> <h2 flex md-truncate><a ui-sref="standing.list">Formula 1 Championship 2016</a></h2> </div> </md-toolbar>'),a.put("views/standing/standing.detail.html",'<md-content layout-padding> <md-card ng-show="!loadingDriver"> <ul class="list-inline breadcrumbs"> <li><ng-md-icon icon="home" size="20"></ng-md-icon> <a href="/">Home</a></li> <li>&raquo;</li> <li>{{driver.givenName}} {{driver.familyName}}</li> </ul> </md-card> <md-card layout-padding> <md-progress-linear md-mode="indeterminate" ng-show="loadingDriver"></md-progress-linear> <div ng-show="!loadingDriver"> <table class="table-driver"> <tbody> <tr> <td>Name</td> <td>{{driver.givenName}} {{driver.familyName}}</td> </tr> <tr> <td>Country</td> <td><flag country="{{ driver.nationality | lowercase }}"></flag> {{driver.nationality}}</td> </tr> <tr> <td>Date of Birth</td> <td>{{driver.dateOfBirth | date : format : timezone}}</td> </tr> <tr> <td>Biography</td> <td><a href="{{driver.url}}" target="_blank">{{driver.url}}</a></td> </tr> <tr> <td>Team</td> <td> <ul class="constructors"> <li ng-repeat="constructor in constructors">{{constructor.name}}</li> </ul> </td> </tr> </tbody> </table> </div> </md-card> <md-card layout-padding> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <div flex="80"> <span>Races</span> </div> <div flex-gt-sm="20" flex="80"> <md-input-container md-no-float> <input ng-model="filter.search" placeholder="Search race"> </md-input-container> </div> </div> </md-toolbar> <md-table-container> <table md-table md-progress="promise" class="races"> <thead md-head md-order="query.order"> <tr md-row> <th md-column md-order-by="round | num" md-desc><span>Round</span></th> <th md-column md-order-by="raceName"><span>Grand Prix</span></th> <th md-column md-order-by="Results[0].Constructor.name"><span>Team</span></th> <th md-column md-numeric md-order-by="Results[0].grid | num"><span>Grid</span></th> <th md-column md-order-by="Circuit.circuitName"><span>Race</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="race" ng-repeat="race in races | filter: filter.search | orderBy: query.order"> <td md-cell>{{race.round}}</td> <td md-cell>{{race.raceName}}</td> <td md-cell>{{race.Results[0].Constructor.name}}</td> <td md-cell>{{race.Results[0].grid | num}}</td> <td md-cell>{{race.Circuit.circuitName}}</td> </tr> </tbody> </table> </md-table-container> </md-card> </md-content>'),a.put("views/standing/standing.list.html",'<md-content layout-padding> <md-card> <ul class="list-inline breadcrumbs"> <li><ng-md-icon icon="home" size="20"></ng-md-icon> Home</li> </ul> </md-card> <md-card> <md-card-content> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <div flex="80"> <span>Driver Standings</span> </div> <div flex-gt-sm="20" flex="80"> <md-input-container md-no-float> <input ng-model="filter.search" placeholder="Search driver"> </md-input-container> </div> </div> </md-toolbar> <md-table-container> <table md-table md-progress="loadingStanding"> <thead md-head md-order="query.order"> <tr md-row> <th md-column><span>Name</span></th> <th md-column hide-xs><span>Nationality</span></th> <th md-column md-numeric md-order-by="position | num" md-asc><span>Position</span></th> <th md-column md-numeric md-order-by="wins | num" hide-xs><span>Total Wins</span></th> </tr> </thead> <tbody md-body> <tr md-row md-select="standing" ng-repeat="standing in standings.DriverStandings | filter: filter.search | orderBy: query.order"> <td md-cell><a ui-sref="standing.detail({driverId: standing.Driver.driverId})">{{standing.Driver.givenName}} {{standing.Driver.familyName}}</a></td> <td md-cell hide-xs><flag country="{{ standing.Driver.nationality | lowercase }}"></flag> {{standing.Driver.nationality}}</td> <td md-cell>{{standing.position | num}}</td> <td md-cell hide-xs>{{standing.wins | num}}</td> </tr> </tbody> </table> </md-table-container> </md-card-content> </md-card> </md-content>')}]);